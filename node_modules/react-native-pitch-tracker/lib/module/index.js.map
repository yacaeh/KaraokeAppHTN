{"version":3,"sources":["index.tsx"],"names":["NativeEventEmitter","NativeModules","Platform","request","PERMISSIONS","RESULTS","PitchTracker","eventEmitter","askPermission","permission","select","android","ANDROID","RECORD_AUDIO","ios","IOS","MICROPHONE","result","GRANTED","console","log","error","prepare","noteOn","callback","addListener","noteOff"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,aAA7B,EAA4CC,QAA5C,QAA4D,cAA5D;AACA,SAASC,OAAT,EAAkBC,WAAlB,EAA+BC,OAA/B,QAA8C,0BAA9C;AAUA,MAAM;AAAEC,EAAAA;AAAF,IAAmBL,aAAzB;AACA,MAAMM,YAAY,GAAG,IAAIP,kBAAJ,CAAuBM,YAAvB,CAArB;;AAEA,MAAME,aAAa,GAAG,YAAY;AAChC,MAAI;AACF,QAAIC,UAAU,GAAGP,QAAQ,CAACQ,MAAT,CAAgB;AAC/BC,MAAAA,OAAO,EAAEP,WAAW,CAACQ,OAAZ,CAAoBC,YADE;AAE/BC,MAAAA,GAAG,EAAEV,WAAW,CAACW,GAAZ,CAAgBC;AAFU,KAAhB,CAAjB;AAIA,UAAMC,MAAM,GAAG,MAAMd,OAAO,CAACM,UAAD,CAA5B;;AACA,QAAIQ,MAAM,KAAKZ,OAAO,CAACa,OAAvB,EAAgC;AAC9BC,MAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACD;AACF,GATD,CASE,OAAOC,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BC,KAA7B;AACD;AACF,CAbD;;AAeA,eAAe,EACb,GAAGf,YADU;AAEbgB,EAAAA,OAAO,EAAE,MAAM;AACbd,IAAAA,aAAa;AACbF,IAAAA,YAAY,CAACgB,OAAb;AACD,GALY;AAMbC,EAAAA,MAAM,EAAGC,QAAD,IAAoC;AAC1CjB,IAAAA,YAAY,CAACkB,WAAb,CAAyB,QAAzB,EAAmCD,QAAnC;AACD,GARY;AASbE,EAAAA,OAAO,EAAGF,QAAD,IAAoC;AAC3CjB,IAAAA,YAAY,CAACkB,WAAb,CAAyB,SAAzB,EAAoCD,QAApC;AACD;AAXY,CAAf","sourcesContent":["import { NativeEventEmitter, NativeModules, Platform } from 'react-native';\nimport { request, PERMISSIONS, RESULTS } from 'react-native-permissions';\n\ntype PitchTrackerType = {\n  prepare(): any;\n  start(): any;\n  stop(): any;\n  noteOn(callback: (midiNum: any) => any): any;\n  noteOff(callback: (midiNum: any) => any): any;\n};\n\nconst { PitchTracker } = NativeModules;\nconst eventEmitter = new NativeEventEmitter(PitchTracker);\n\nconst askPermission = async () => {\n  try {\n    let permission = Platform.select({\n      android: PERMISSIONS.ANDROID.RECORD_AUDIO,\n      ios: PERMISSIONS.IOS.MICROPHONE,\n    })!;\n    const result = await request(permission);\n    if (result === RESULTS.GRANTED) {\n      console.log('Microphone Permission Successful');\n    }\n  } catch (error) {\n    console.log('askPermission', error);\n  }\n};\n\nexport default {\n  ...PitchTracker,\n  prepare: () => {\n    askPermission();\n    PitchTracker.prepare();\n  },\n  noteOn: (callback: (res: object) => any) => {\n    eventEmitter.addListener('NoteOn', callback);\n  },\n  noteOff: (callback: (res: object) => any) => {\n    eventEmitter.addListener('NoteOff', callback);\n  },\n} as PitchTrackerType;\n"]}